{"ast":null,"code":"import _slicedToArray from\"D:/react projects/realtime-white-board/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import Forms from'./Components/forms/forms';import{Routes,Route}from\"react-router-dom\";import RoomPage from'./Pages/RoomPage/RoomPage';import io from\"socket.io-client\";import{useEffect,useState}from'react';import{ToastContainer,toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var server=\"https://drawverse.onrender.com\";var connectionOptions={\"force new connection\":true,reconnectionAttempts:\"Infinity\",timeout:10000,transports:[\"websocket\"]};var socket=io(server,connectionOptions);function App(){//states\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];useEffect(function(){console.log(\"Updated users list:\",users);},[users]);useEffect(function(){socket.on(\"userIsJoined\",function(data){if(data.success){console.log(\"user has joined the session\");setUsers(data.users);console.log(\"userIsJoined: \",users);}else{console.log(\"user joining error\");}});socket.on(\"allUsers\",function(data){setUsers(data);});socket.on(\"userJoinedMessageBroadcasted\",function(data){toast.info(\"\".concat(data,\" joined the room\"));});socket.on(\"userLeftMessageBroadcasted\",function(data){console.log(\"data:\"+data);toast.info(\"\".concat(data.name,\" has left the room\"));console.log(\"updated users\"+data.updatedUsers);setUsers(data.updatedUsers);console.log(users);});return function(){socket.off(\"userIsJoined\");socket.off(\"allUsers\");socket.off(\"userJoinedMessageBroadcasted\");socket.off(\"userLeftMessageBroadcasted\");};});//generating random id\nvar uuid=function uuid(){var S4=function S4(){return((1+Math.random())*0x10000|0).toString(16).substring(1);};return S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4();};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Forms,{uuid:uuid,socket:socket,setUser:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/:roomId\",element:/*#__PURE__*/_jsx(RoomPage,{user:user,socket:socket,users:users})})]})]});}export default App;","map":{"version":3,"names":["Forms","Routes","Route","RoomPage","io","useEffect","useState","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","server","connectionOptions","reconnectionAttempts","timeout","transports","socket","App","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","users","setUsers","console","log","on","data","success","info","concat","name","updatedUsers","off","uuid","S4","Math","random","toString","substring","className","children","path","element"],"sources":["D:/react projects/realtime-white-board/frontend/src/App.js"],"sourcesContent":["import './App.css';\nimport Forms from './Components/forms/forms';\nimport {Routes, Route} from \"react-router-dom\"\nimport RoomPage from './Pages/RoomPage/RoomPage';\nimport  io from \"socket.io-client\";\nimport { useEffect, useState } from 'react';\nimport {ToastContainer, toast} from 'react-toastify';\n\n\nconst server = \"https://drawverse.onrender.com\";\nconst connectionOptions = {\n  \"force new connection\": true,\n  reconnectionAttempts: \"Infinity\",\n  timeout: 10000,\n  transports: [\"websocket\"],\n};\n\n\n\nconst socket = io(server, connectionOptions);\n\nfunction App() {\n\n  //states\n  const [user,setUser] = useState({});\n  const [users,setUsers] = useState([]);\n\n  useEffect(() => {\n    console.log(\"Updated users list:\", users);\n  }, [users]);\n\n\n  useEffect(() => {\n    socket.on(\"userIsJoined\",(data)=> {\n      if(data.success){\n        console.log(\"user has joined the session\");\n        setUsers(data.users);\n        console.log(\"userIsJoined: \",users);\n      }\n      else{\n        console.log(\"user joining error\");\n      }\n    });\n    socket.on(\"allUsers\",(data) => {\n      setUsers(data);\n    });\n\n    socket.on(\"userJoinedMessageBroadcasted\",(data)=> {\n      toast.info(`${data} joined the room`);\n    });\n\n\n    socket.on(\"userLeftMessageBroadcasted\",(data)=>{\n      console.log(\"data:\" + data);\n      toast.info(`${data.name} has left the room`);\n      console.log(\"updated users\" + data.updatedUsers);\n      setUsers(data.updatedUsers);\n      console.log(users);\n    });\n\n    return () => {\n      socket.off(\"userIsJoined\");\n      socket.off(\"allUsers\");\n      socket.off(\"userJoinedMessageBroadcasted\");\n      socket.off(\"userLeftMessageBroadcasted\");\n    };\n  \n  })\n\n \n\n  //generating random id\n  const uuid = () =>{\n    let S4 = () => {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    };\n    return (\n      S4() +\n      S4() +\n      \"-\" +\n      S4() +\n      \"-\" +\n      S4() +\n      \"-\" +\n      S4() +\n      \"-\" +\n      S4() +\n      S4() +\n      S4() \n    );\n   };\n  return (\n   <div className='container'>\n    <ToastContainer/>\n    <Routes>\n      <Route path='/' element={<Forms uuid={uuid} socket={socket} setUser={setUser}/>} />\n      <Route path=\"/:roomId\" element={<RoomPage user={user} socket = {socket} users={users}/>} />\n    </Routes>\n   </div>\n   \n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}